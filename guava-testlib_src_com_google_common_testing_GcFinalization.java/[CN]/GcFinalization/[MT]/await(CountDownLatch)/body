{
  if (latch.getCount() == 0) {
    return;
  }
  final long timeoutSeconds=timeoutSeconds();
  final long deadline=System.nanoTime() + SECONDS.toNanos(timeoutSeconds);
  do {
    System.runFinalization();
    if (latch.getCount() == 0) {
      return;
    }
    System.gc();
    if (latch.await(1L,SECONDS)) {
      return;
    }
  }
 while (System.nanoTime() - deadline < 0);
  throw new TimeoutException(String.format("CountDownLatch failed to count down within timeout of %d seconds",timeoutSeconds));
}
