{
  try {
    if (requiresByteLevelDecoding(encoding)) {
      byte[] rawBytes=URLDecoder.decode(str,"ISO-8859-1").getBytes(Charsets.ISO_8859_1);
      return new String(rawBytes,encoding);
    }
    return URLDecoder.decode(str,encoding.name());
  }
 catch (  IllegalArgumentException iae) {
    return str;
  }
catch (  UnsupportedEncodingException e) {
    return str;
  }
}
