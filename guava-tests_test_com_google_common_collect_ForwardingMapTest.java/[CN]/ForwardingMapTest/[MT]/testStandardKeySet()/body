{
  @SuppressWarnings("unchecked") Set<Entry<String,Boolean>> entrySet=createMock(Set.class);
  expect(entrySet.iterator()).andReturn(Iterators.<Entry<String,Boolean>>emptyIterator()).anyTimes();
  @SuppressWarnings("unchecked") final Map<String,Boolean> map=createMock(Map.class);
  expect(map.containsKey(anyObject())).andReturn(false).anyTimes();
  expect(map.isEmpty()).andReturn(true).anyTimes();
  expect(map.remove(anyObject())).andReturn(null).anyTimes();
  expect(map.size()).andReturn(0).anyTimes();
  expect(map.entrySet()).andReturn(entrySet).anyTimes();
  map.clear();
  expectLastCall().anyTimes();
  replay(entrySet,map);
  Map<String,Boolean> forward=new ForwardingMap<String,Boolean>(){
    @Override protected Map<String,Boolean> delegate(){
      return map;
    }
    @Override public Set<String> keySet(){
      return new StandardKeySet();
    }
  }
;
  callAllPublicMethods(Set.class,forward.keySet());
  verify(entrySet,map);
}
