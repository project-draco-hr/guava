{
  checkNotNull(edge,"edge");
  N nodeA=edgeToReferenceNode.get(edge);
  if (nodeA == null) {
    return false;
  }
  NodeConnections<N,E> connectionsA=nodeConnections.get(nodeA);
  N nodeB=connectionsA.oppositeNode(edge);
  boolean isSelfLoop=allowsSelfLoops() && nodeA.equals(nodeB);
  NodeConnections<N,E> connectionsB=isSelfLoop ? connectionsA : nodeConnections.get(nodeB);
  connectionsA.removeOutEdge(edge);
  connectionsB.removeInEdge(edge,isSelfLoop);
  edgeToReferenceNode.remove(edge);
  return true;
}
