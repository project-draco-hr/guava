{
  Random rand=new Random(0);
  int keyBits=32;
  int hashBits=function.bits();
  for (int i=0; i < keyBits; i++) {
    int same=0x0;
    int diff=0x0;
    int count=0;
    int maxCount=(int)(2 * Math.log(2 * keyBits * hashBits) + 0.999);
    while (same != 0xffffffff || diff != 0xffffffff) {
      int key1=rand.nextInt();
      int key2=key1 ^ (1 << i);
      int hash1=function.newHasher().putInt(key1).hash().asInt();
      int hash2=function.newHasher().putInt(key2).hash().asInt();
      same|=~(hash1 ^ hash2);
      diff|=(hash1 ^ hash2);
      count++;
      if (count > maxCount) {
        Assert.fail("input bit(" + i + ") was found not to affect all "+ hashBits+ " output bits; The unaffected bits are "+ "as follows: "+ ~(same & diff)+ ". This was "+ "determined after "+ count+ " trials.");
      }
    }
  }
}
