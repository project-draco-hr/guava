{
  RunnableVerifier before=new RunnableVerifier();
  RunnableVerifier after=new RunnableVerifier();
  RunnableVerifier inBetween=new RunnableVerifier();
  future.addListener(before.expectedToRun(),directExecutor());
  future.setFuture(delegate);
  future.addListener(inBetween.expectedToRun(),directExecutor());
  delegate.setException(new Exception());
  future.addListener(after.expectedToRun(),directExecutor());
  before.verify();
  inBetween.verify();
  after.verify();
}
