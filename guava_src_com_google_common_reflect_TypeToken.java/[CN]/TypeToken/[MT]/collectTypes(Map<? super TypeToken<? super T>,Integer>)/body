{
  Integer existing=map.get(this);
  if (existing != null) {
    return existing;
  }
  int aboveMe=getRawType().isInterface() ? 1 : 0;
  for (  TypeToken<? super T> interfaceType : getGenericInterfaces()) {
    aboveMe=Math.max(aboveMe,interfaceType.collectTypes(map));
  }
  TypeToken<? super T> superclass=getGenericSuperclass();
  if (superclass != null) {
    aboveMe=Math.max(aboveMe,superclass.collectTypes(map));
  }
  map.put(this,aboveMe + 1);
  return aboveMe + 1;
}
