{
  final SortedMap<K,V> map;
  try {
    map=makePopulatedMap();
  }
 catch (  UnsupportedOperationException e) {
    return;
  }
  if (map.size() < 3) {
    return;
  }
  Iterator<Entry<K,V>> iterator=map.entrySet().iterator();
  Entry<K,V> firstEntry=iterator.next();
  Entry<K,V> secondEntry=iterator.next();
  Entry<K,V> thirdEntry=iterator.next();
  SortedMap<K,V> head=map.headMap(secondEntry.getKey());
  Set<Entry<K,V>> headEntrySet=head.entrySet();
  assertFalse(headEntrySet.contains(thirdEntry));
  assertFalse(headEntrySet.contains(secondEntry));
  assertTrue(headEntrySet.contains(firstEntry));
  assertEquals(head.firstKey(),firstEntry.getKey());
  assertEquals(head.lastKey(),firstEntry.getKey());
}
