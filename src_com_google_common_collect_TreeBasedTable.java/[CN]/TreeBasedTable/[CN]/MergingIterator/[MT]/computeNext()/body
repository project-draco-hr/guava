{
  while (!queue.isEmpty()) {
    PeekingIterator<T> nextIter=queue.poll();
    T next=nextIter.next();
    boolean duplicate=lastValue != null && comparator.compare(next,lastValue) == 0;
    if (nextIter.hasNext()) {
      queue.add(nextIter);
    }
    if (!duplicate) {
      lastValue=next;
      return lastValue;
    }
  }
  lastValue=null;
  return endOfData();
}
