{
  Object[] elements=collection.toArray();
switch (elements.length) {
case 0:
    return of();
case 1:
  @SuppressWarnings("unchecked") E onlyElement=(E)elements[0];
return of(onlyElement);
default :
return construct(elements.length,elements);
}
}
