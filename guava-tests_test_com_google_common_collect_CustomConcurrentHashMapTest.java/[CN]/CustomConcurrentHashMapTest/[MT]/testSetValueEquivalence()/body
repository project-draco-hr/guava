{
  Equivalence<Object> testEquivalence=new Equivalence<Object>(){
    @Override protected boolean doEquivalent(    Object a,    Object b){
      return false;
    }
    @Override protected int doHash(    Object t){
      return 0;
    }
  }
;
  CustomConcurrentHashMap<Object,Object> map=makeMap(createMapMaker().valueEquivalence(testEquivalence));
  assertSame(testEquivalence,map.valueEquivalence);
  assertSame(map.keyStrength.defaultEquivalence(),map.keyEquivalence);
}
