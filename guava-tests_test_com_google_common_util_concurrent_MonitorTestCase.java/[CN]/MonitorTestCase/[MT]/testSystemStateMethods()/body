{
  checkSystemStateMethods(0);
  thread1.callAndAssertReturns(enter());
  checkSystemStateMethods(1);
  thread1.callAndAssertReturns(enter());
  checkSystemStateMethods(2);
  thread1.callAndAssertReturns(leave());
  checkSystemStateMethods(1);
  thread1.callAndAssertReturns(leave());
  checkSystemStateMethods(0);
}
