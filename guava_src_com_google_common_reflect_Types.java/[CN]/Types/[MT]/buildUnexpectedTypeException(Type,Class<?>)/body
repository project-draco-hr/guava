{
  StringBuilder exceptionMessage=new StringBuilder("Unexpected type. Expected one of: ");
  for (  Class<?> clazz : expected) {
    exceptionMessage.append(clazz.getName()).append(", ");
  }
  exceptionMessage.append("but got: ").append(type.getClass().getName()).append(", for type: ").append(toString(type)).append('.');
  return new IllegalArgumentException(exceptionMessage.toString());
}
