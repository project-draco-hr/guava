{
  Runnable r=new CheckedRunnable(){
    @Override public void realRun() throws Exception {
      ExecutorService e=new DirectExecutorService();
      Future future=e.submit(Executors.callable(new PrivilegedAction(){
        public Object run(){
          return TEST_STRING;
        }
      }
));
      assertSame(TEST_STRING,future.get());
    }
  }
;
  runWithPermissions(r,new RuntimePermission("getClassLoader"),new RuntimePermission("setContextClassLoader"),new RuntimePermission("modifyThread"));
}
