{
  Comparator<Integer> comparator=Ordering.natural();
  SortedMap<Integer,String> unfiltered=Maps.newTreeMap(comparator);
  unfiltered.put(1,"one");
  unfiltered.put(2,"two");
  unfiltered.put(3,"three");
  unfiltered.put(4,"four");
  unfiltered.put(5,"five");
  unfiltered.put(6,"six");
  unfiltered.put(7,"seven");
  SortedMap<Integer,String> filtered=Maps.filterKeys(unfiltered,EVEN);
  ASSERT.that(filtered.keySet()).hasContentsInOrder(2,4,6);
  assertSame(comparator,filtered.comparator());
  assertEquals((Integer)2,filtered.firstKey());
  assertEquals((Integer)6,filtered.lastKey());
  ASSERT.that(filtered.headMap(5).keySet()).hasContentsInOrder(2,4);
  ASSERT.that(filtered.tailMap(3).keySet()).hasContentsInOrder(4,6);
  ASSERT.that(filtered.subMap(3,5).keySet()).hasContentsInOrder(4);
}
