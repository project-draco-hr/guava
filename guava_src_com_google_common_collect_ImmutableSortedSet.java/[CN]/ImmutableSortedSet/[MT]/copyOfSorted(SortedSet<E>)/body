{
  Comparator<? super E> comparator=sortedSet.comparator();
  if (comparator == null) {
    comparator=(Comparator<? super E>)NATURAL_ORDER;
  }
  E[] elements=(E[])sortedSet.toArray();
  if (elements.length == 0) {
    return emptySet(comparator);
  }
 else {
    return new RegularImmutableSortedSet<E>(ImmutableList.<E>asImmutableList(elements),comparator);
  }
}
