{
  File asciiFile=getTestFile("ascii.txt");
  File i18nFile=getTestFile("i18n.txt");
  assertTrue(Arrays.equals(ASCII.getBytes(Charsets.US_ASCII),Files.toByteArray(asciiFile)));
  assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8),Files.toByteArray(i18nFile)));
  assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8),Files.asByteSource(i18nFile).read()));
  assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8),Files.toByteArray(new BadLengthFile(i18nFile,0))));
  try {
    Files.toByteArray(new BadLengthFile(asciiFile,1L + Integer.MAX_VALUE));
    fail("expected exception");
  }
 catch (  OutOfMemoryError expected) {
  }
}
