{
  Set<E> outEdgesN1=outEdges(node1);
  if (node1.equals(node2)) {
    if (!config.isSelfLoopsAllowed()) {
      return ImmutableSet.of();
    }
    Set<E> selfLoopEdges=Sets.filter(outEdgesN1,Graphs.selfLoopPredicate(this));
    return Collections.unmodifiableSet(selfLoopEdges);
  }
  Set<E> inEdgesN2=inEdges(node2);
  return (outEdgesN1.size() <= inEdgesN2.size()) ? Sets.intersection(outEdgesN1,inEdgesN2) : Sets.intersection(inEdgesN2,outEdgesN1);
}
