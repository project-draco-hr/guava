{
  MapJoiner j=Joiner.on(";").withKeyValueSeparator(":");
  assertEquals("",j.join(ImmutableMultimap.of().entries()));
  assertEquals(":",j.join(ImmutableMultimap.of("","").entries()));
  assertEquals("1:a;1:b",j.join(ImmutableMultimap.of("1","a","1","b").entries()));
  Map<String,String> mapWithNulls=Maps.newLinkedHashMap();
  mapWithNulls.put("a",null);
  mapWithNulls.put(null,"b");
  Set<Map.Entry<String,String>> entriesWithNulls=mapWithNulls.entrySet();
  try {
    j.join(entriesWithNulls);
    fail();
  }
 catch (  NullPointerException expected) {
  }
  assertEquals("a:00;00:b",j.useForNull("00").join(entriesWithNulls));
  StringBuilder sb=new StringBuilder();
  j.appendTo(sb,ImmutableMultimap.of(1,2,3,4,5,6,1,3,5,10).entries());
  assertEquals("1:2;1:3;3:4;5:6;5:10",sb.toString());
}
