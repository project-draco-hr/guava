{
  final Error error=new Error("deliberate");
  AsyncFunction<String,Integer> function=new AsyncFunction<String,Integer>(){
    @Override public ListenableFuture<Integer> apply(    String input){
      throw error;
    }
  }
;
  SettableFuture<String> inputFuture=SettableFuture.create();
  ListenableFuture<Integer> outputFuture=Futures.transformAsync(inputFuture,function);
  inputFuture.set("value");
  try {
    outputFuture.get();
    fail("should have thrown error");
  }
 catch (  ExecutionException e) {
    assertSame(error,e.getCause());
  }
}
