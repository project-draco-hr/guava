{
  ImmutableSet.Builder<ClassInfo> builder=ImmutableSet.builder();
  JarFile jarFile;
  try {
    jarFile=new JarFile(file);
  }
 catch (  IOException e) {
    return ImmutableSet.of();
  }
  try {
    for (    URI uri : getClassPathFromManifest(file,jarFile.getManifest())) {
      builder.addAll(readClassesFrom(uri,classloader));
    }
    Enumeration<JarEntry> entries=jarFile.entries();
    while (entries.hasMoreElements()) {
      JarEntry entry=entries.nextElement();
      if (isTopLevelClassFile(entry.getName())) {
        String className=getClassName(entry.getName().replace('/','.'));
        builder.add(new ClassInfo(className,classloader));
      }
    }
  }
  finally {
    try {
      jarFile.close();
    }
 catch (    IOException ignored) {
    }
  }
  return builder.build();
}
