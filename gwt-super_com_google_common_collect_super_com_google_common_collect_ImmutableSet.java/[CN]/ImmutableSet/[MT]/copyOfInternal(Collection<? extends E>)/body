{
switch (collection.size()) {
case 0:
    return of();
case 1:
  return ImmutableSet.<E>of(collection.iterator().next());
default :
Set<E> delegate=Sets.newLinkedHashSet();
for (E element : collection) {
checkNotNull(element);
delegate.add(element);
}
return new RegularImmutableSet<E>(delegate);
}
}
