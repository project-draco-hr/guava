{
  NoOpService service=new NoOpService();
  RecordingListener listener=RecordingListener.record(service);
  Future<State> stopResult=service.stop();
  assertEquals(State.TERMINATED,service.state());
  assertEquals(State.TERMINATED,stopResult.get());
  Future<State> startResult=service.start();
  assertEquals(State.TERMINATED,service.state());
  assertEquals(State.TERMINATED,startResult.get());
  assertEquals(State.TERMINATED,Iterables.getOnlyElement(listener.getStateHistory()));
}
