{
  NoOpService service=new NoOpService();
  currentThread().interrupt();
  try {
    service.startAndWait();
    assertEquals(Service.State.RUNNING,service.state());
    service.stopAndWait();
    assertEquals(Service.State.TERMINATED,service.state());
    assertTrue(currentThread().isInterrupted());
  }
  finally {
    Thread.interrupted();
  }
}
