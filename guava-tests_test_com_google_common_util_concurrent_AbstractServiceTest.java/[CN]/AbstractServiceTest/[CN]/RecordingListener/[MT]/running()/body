{
  assertEquals(State.STARTING,Iterables.getOnlyElement(stateHistory));
  stateHistory.add(State.RUNNING);
  assertTrue(service.start().isDone());
  assertEquals(State.RUNNING,service.startAndWait());
  assertNotSame(State.STARTING,service.state());
}
