{
  assertEquals(from,Iterables.getLast(stateHistory));
  stateHistory.add(State.STOPPING);
  if (from == State.STARTING) {
    assertTrue(service.start().isDone());
    assertEquals(State.STOPPING,service.startAndWait());
  }
  MoreAsserts.assertNotEqual(from,service.state());
}
