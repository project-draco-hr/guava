{
  checkNotNull(graph,"graph");
  checkNotNull(nodePredicate,"nodePredicate");
  checkArgument(!((graph instanceof Network) && ((Network<N,?>)graph).allowsParallelEdges()),NETWORK_WITH_PARALLEL_EDGE);
  MutableGraph<N> copy=GraphBuilder.from(graph).expectedNodeCount(graph.nodes().size()).build();
  for (  N node : Sets.filter(graph.nodes(),nodePredicate)) {
    copy.addNode(node);
    for (    N successor : Sets.filter(graph.successors(node),nodePredicate)) {
      copy.addEdge(node,successor);
    }
  }
  return copy;
}
