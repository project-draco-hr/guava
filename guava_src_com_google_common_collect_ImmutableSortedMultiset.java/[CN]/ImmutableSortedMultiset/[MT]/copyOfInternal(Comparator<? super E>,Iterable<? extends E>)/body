{
  if (SortedIterables.hasSameComparator(comparator,iterable) && iterable instanceof ImmutableSortedMultiset<?>) {
    ImmutableSortedMultiset<E> multiset=(ImmutableSortedMultiset<E>)iterable;
    if (!multiset.isPartialView()) {
      return (ImmutableSortedMultiset<E>)iterable;
    }
  }
  ImmutableList<Entry<E>> entries=(ImmutableList)ImmutableList.copyOf(SortedIterables.sortedCounts(comparator,iterable));
  if (entries.isEmpty()) {
    return emptyMultiset(comparator);
  }
  verifyEntries(entries);
  return RegularImmutableSortedMultiset.createFromSorted(comparator,entries);
}
