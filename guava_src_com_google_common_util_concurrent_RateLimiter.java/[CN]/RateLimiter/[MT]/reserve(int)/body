{
  checkPermits(permits);
synchronized (mutex()) {
    return reserveNextTicket(permits,stopwatch.readMicros());
  }
}
