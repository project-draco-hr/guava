{
  checkNotNull(domain);
  Range<C> effectiveRange=this;
  try {
    if (!hasLowerBound()) {
      effectiveRange=effectiveRange.intersection(Ranges.atLeast(domain.minValue()));
    }
    if (!hasUpperBound()) {
      effectiveRange=effectiveRange.intersection(Ranges.atMost(domain.maxValue()));
    }
  }
 catch (  NoSuchElementException e) {
    throw new IllegalArgumentException(e);
  }
  return effectiveRange.isEmpty() || (lowerBound.leastValueAbove(domain).compareTo(upperBound.greatestValueBelow(domain)) > 0) ? new EmptyContiguousSet<C>(domain) : new RegularContiguousSet<C>(effectiveRange,domain);
}
