{
  Set<E> sourceOutEdges=outEdges(node1);
  if (!config.isSelfLoopsAllowed() && node1.equals(node2)) {
    return ImmutableSet.of();
  }
  Set<E> targetInEdges=inEdges(node2);
  return (sourceOutEdges.size() <= targetInEdges.size()) ? Sets.intersection(sourceOutEdges,targetInEdges) : Sets.intersection(targetInEdges,sourceOutEdges);
}
