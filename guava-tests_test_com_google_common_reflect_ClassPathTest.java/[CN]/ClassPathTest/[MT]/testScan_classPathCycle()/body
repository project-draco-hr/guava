{
  File jarFile=File.createTempFile("with_circular_class_path",".jar");
  try {
    writeSelfReferencingJarFile(jarFile,"test.txt");
    ClassPath.Scanner scanner=new ClassPath.Scanner();
    scanner.scan(jarFile.toURI(),ClassPathTest.class.getClassLoader());
    assertEquals(1,scanner.getResources().size());
  }
  finally {
    jarFile.delete();
  }
}
