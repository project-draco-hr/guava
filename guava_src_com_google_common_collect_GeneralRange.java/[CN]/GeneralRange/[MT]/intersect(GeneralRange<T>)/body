{
  checkNotNull(other);
  checkArgument(comparator.equals(other.comparator));
  boolean hasLowBound=this.hasLowerBound;
  @Nullable T lowEnd=lowerEndpoint;
  BoundType lowType=lowerBoundType;
  if (!hasLowerBound()) {
    hasLowBound=other.hasLowerBound;
    lowEnd=other.lowerEndpoint;
    lowType=other.lowerBoundType;
  }
 else   if (other.hasLowerBound()) {
    int cmp=comparator.compare(lowerEndpoint,other.lowerEndpoint);
    if (cmp < 0 || (cmp == 0 && other.lowerBoundType == OPEN)) {
      lowEnd=other.lowerEndpoint;
      lowType=other.lowerBoundType;
    }
  }
  boolean hasUpBound=this.hasUpperBound;
  @Nullable T upEnd=upperEndpoint;
  BoundType upType=upperBoundType;
  if (!hasUpperBound()) {
    hasUpBound=other.hasUpperBound;
    upEnd=other.upperEndpoint;
    upType=other.upperBoundType;
  }
 else   if (other.hasUpperBound()) {
    int cmp=comparator.compare(upperEndpoint,other.upperEndpoint);
    if (cmp > 0 || (cmp == 0 && other.upperBoundType == OPEN)) {
      upEnd=other.upperEndpoint;
      upType=other.upperBoundType;
    }
  }
  if (hasLowBound && hasUpBound) {
    int cmp=comparator.compare(lowEnd,upEnd);
    if (cmp > 0 || (cmp == 0 && lowType == OPEN && upType == OPEN)) {
      lowEnd=upEnd;
      lowType=OPEN;
      upType=CLOSED;
    }
  }
  return new GeneralRange<T>(comparator,hasLowBound,lowEnd,lowType,hasUpBound,upEnd,upType);
}
