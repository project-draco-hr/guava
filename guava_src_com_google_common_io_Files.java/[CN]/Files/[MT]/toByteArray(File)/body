{
  checkNotNull(file);
  checkArgument(file.length() <= Integer.MAX_VALUE);
  if (file.length() == 0) {
    return ByteStreams.toByteArray(newInputStreamSupplier(file));
  }
 else {
    byte[] b=new byte[(int)file.length()];
    Closer closer=Closer.create();
    try {
      InputStream in=closer.add(new FileInputStream(file));
      ByteStreams.readFully(in,b);
    }
 catch (    Throwable e) {
      throw closer.rethrow(e,IOException.class);
    }
 finally {
      closer.close();
    }
    return b;
  }
}
