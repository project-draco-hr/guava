{
  Multimap<String,Integer> multimap=create();
  multimap.put("foo",1);
  multimap.put("foo",null);
  multimap.put(null,3);
  Map<String,Collection<Integer>> map=multimap.asMap();
  Map<String,Collection<Integer>> equalMap=Maps.newHashMap();
  equalMap.put("foo",Sets.newHashSet(1,null));
  equalMap.put(null,Sets.newHashSet(3));
  assertEquals(map,equalMap);
  assertEquals(equalMap,map);
  assertEquals(equalMap.hashCode(),multimap.hashCode());
  Map<String,Collection<Integer>> unequalMap=Maps.newHashMap();
  equalMap.put("foo",Sets.newHashSet(3,null));
  equalMap.put(null,Sets.newHashSet(1));
  assertFalse(map.equals(unequalMap));
  assertFalse(unequalMap.equals(map));
}
