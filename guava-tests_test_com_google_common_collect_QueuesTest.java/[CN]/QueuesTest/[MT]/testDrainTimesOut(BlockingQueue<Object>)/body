{
  for (  boolean interruptibly : new boolean[]{true,false}) {
    assertEquals(0,Queues.drain(q,ImmutableList.of(),1,10,TimeUnit.MILLISECONDS));
    threadPool.submit(new Producer(q,1));
    long startTime=System.nanoTime();
    assertTrue(drain(q,Lists.newArrayList(),2,10,TimeUnit.MILLISECONDS,interruptibly) <= 1);
    assertTrue((System.nanoTime() - startTime) >= TimeUnit.MILLISECONDS.toNanos(10));
  }
}
