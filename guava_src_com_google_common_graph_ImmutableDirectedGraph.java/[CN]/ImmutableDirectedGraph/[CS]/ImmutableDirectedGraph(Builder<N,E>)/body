{
  DirectedGraph<N,E> directedGraph=builder.directedGraph;
  ImmutableMap.Builder<N,NodeConnections<N,E>> nodeConnectionsBuilder=ImmutableMap.builder();
  for (  N node : directedGraph.nodes()) {
    NodeConnections<N,E> connections=DirectedNodeConnections.ofImmutable(directedGraph.predecessors(node),directedGraph.successors(node),directedGraph.inEdges(node),directedGraph.outEdges(node));
    nodeConnectionsBuilder.put(node,connections);
  }
  this.nodeConnections=nodeConnectionsBuilder.build();
  ImmutableMap.Builder<E,DirectedIncidentNodes<N>> edgeToIncidentNodesBuilder=ImmutableMap.builder();
  for (  E edge : directedGraph.edges()) {
    DirectedIncidentNodes<N> incidentNodes=DirectedIncidentNodes.of(directedGraph.source(edge),directedGraph.target(edge));
    edgeToIncidentNodesBuilder.put(edge,incidentNodes);
  }
  this.edgeToIncidentNodes=edgeToIncidentNodesBuilder.build();
  this.config=directedGraph.config();
}
