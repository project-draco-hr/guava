{
  checkNotNull(nodeA,"nodeA");
  checkNotNull(nodeB,"nodeB");
  checkArgument(allowsSelfLoops() || !nodeA.equals(nodeB),SELF_LOOPS_NOT_ALLOWED,nodeA);
  boolean containsA=containsNode(nodeA);
  boolean containsB=containsNode(nodeB);
  if (containsA && containsB && nodeConnections.get(nodeA).successors().contains(nodeB)) {
    return false;
  }
  if (!containsA) {
    addNode(nodeA);
  }
  NodeAdjacencies<N> connectionsA=nodeConnections.get(nodeA);
  connectionsA.addSuccessor(nodeB);
  if (!containsB) {
    addNode(nodeB);
  }
  NodeAdjacencies<N> connectionsB=nodeConnections.get(nodeB);
  connectionsB.addPredecessor(nodeA);
  return true;
}
