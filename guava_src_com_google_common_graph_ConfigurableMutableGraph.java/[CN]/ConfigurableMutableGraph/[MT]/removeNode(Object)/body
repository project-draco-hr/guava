{
  checkNotNull(node,"node");
  GraphConnections<N> connections=nodeConnections.get(node);
  if (connections == null) {
    return false;
  }
  if (allowsSelfLoops()) {
    if (connections.successors().contains(node)) {
      connections.removeSuccessor(node);
      connections.removePredecessor(node);
      --edgeCount;
    }
  }
  for (  N successor : connections.successors()) {
    nodeConnections.getWithoutCaching(successor).removePredecessor(node);
    --edgeCount;
  }
  if (isDirected()) {
    for (    N predecessor : connections.predecessors()) {
      nodeConnections.getWithoutCaching(predecessor).removeSuccessor(node);
      --edgeCount;
    }
  }
  nodeConnections.remove(node);
  checkNonNegative(edgeCount);
  return true;
}
