{
  if (!lock.isHeldByCurrentThread()) {
synchronized (queuedListeners) {
      Runnable listener;
      while ((listener=queuedListeners.poll()) != null) {
        listener.run();
      }
    }
  }
}
