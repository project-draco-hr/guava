{
  Comparator<Integer> comparator=Ordering.natural();
  SortedMap<Integer,String> unfiltered=Maps.newTreeMap(comparator);
  unfiltered.put(1,"one");
  unfiltered.put(2,"two");
  unfiltered.put(3,"three");
  unfiltered.put(4,"four");
  unfiltered.put(5,"five");
  unfiltered.put(6,"six");
  unfiltered.put(7,"seven");
  SortedMap<Integer,String> filtered=SortedMaps.filterValues(unfiltered,NOT_LENGTH_3);
  ASSERT.that(filtered.keySet()).hasContentsInOrder(3,4,5,7);
  assertSame(comparator,filtered.comparator());
  assertEquals((Integer)3,filtered.firstKey());
  assertEquals((Integer)7,filtered.lastKey());
  ASSERT.that(filtered.headMap(5).keySet()).hasContentsInOrder(3,4);
  ASSERT.that(filtered.tailMap(4).keySet()).hasContentsInOrder(4,5,7);
  ASSERT.that(filtered.subMap(4,6).keySet()).hasContentsInOrder(4,5);
}
