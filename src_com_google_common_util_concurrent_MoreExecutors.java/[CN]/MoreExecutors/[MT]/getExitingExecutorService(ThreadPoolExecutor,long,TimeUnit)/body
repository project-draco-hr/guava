{
  executor.setThreadFactory(daemonThreadFactory(executor.getThreadFactory()));
  ExecutorService service=Executors.unconfigurableExecutorService(executor);
  addDelayedShutdownHook(service,terminationTimeout,timeUnit);
  return service;
}
