{
  try {
    if (isCancelled()) {
      return;
    }
    I sourceResult;
    try {
      sourceResult=getUninterruptibly(inputFuture);
    }
 catch (    CancellationException e) {
      cancel(false);
      return;
    }
catch (    ExecutionException e) {
      setException(e.getCause());
      return;
    }
    ListenableFuture<? extends O> outputFuture=function.apply(sourceResult);
    checkNotNull(outputFuture,"AsyncFunction.apply returned null instead of a Future. " + "Did you mean to return immediateFuture(null)?");
    setFuture(outputFuture);
  }
 catch (  UndeclaredThrowableException e) {
    setException(e.getCause());
  }
catch (  Throwable t) {
    setException(t);
  }
 finally {
    function=null;
    inputFuture=null;
  }
}
