{
  Future<?> localTimer=timer;
  ListenableFuture<V> delegate=delegateRef;
  if (super.cancel(mayInterruptIfRunning)) {
    if (delegate != null) {
      delegateRef=null;
      delegate.cancel(mayInterruptIfRunning);
    }
    if (localTimer != null) {
      timer=null;
      localTimer.cancel(false);
    }
    return true;
  }
  return false;
}
