{
  running=input;
  input.addListener(new Runnable(){
    @Override public void run(){
      ListenableFuture<? extends V> localRunning=running;
      running=null;
      if (localRunning == null | isCancelled()) {
        return;
      }
      Throwable throwable;
      try {
        set(getUninterruptibly(localRunning));
        return;
      }
 catch (      ExecutionException e) {
        throwable=e.getCause();
      }
catch (      Throwable e) {
        throwable=e;
      }
      try {
        setFuture(fallback.create(throwable));
      }
 catch (      Throwable e) {
        setException(e);
      }
    }
  }
,executor);
}
