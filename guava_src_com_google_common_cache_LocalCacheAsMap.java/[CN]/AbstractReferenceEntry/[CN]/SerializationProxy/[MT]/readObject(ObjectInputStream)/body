{
  in.defaultReadObject();
  CacheBuilder<Object,Object> builder=CacheBuilder.newBuilder().setKeyStrength(keyStrength).setValueStrength(valueStrength).keyEquivalence(keyEquivalence).valueEquivalence(valueEquivalence).concurrencyLevel(concurrencyLevel);
  builder.strictParsing=false;
  builder.removalListener(removalListener);
  if (expireAfterWriteNanos > 0) {
    builder.expireAfterWrite(expireAfterWriteNanos,TimeUnit.NANOSECONDS);
  }
  if (expireAfterAccessNanos > 0) {
    builder.expireAfterAccess(expireAfterAccessNanos,TimeUnit.NANOSECONDS);
  }
  if (weigher != OneWeigher.INSTANCE) {
    builder.weigher(weigher);
    if (maxWeight != UNSET_INT) {
      builder.maximumWeight(maxWeight);
    }
  }
 else {
    if (maxWeight != UNSET_INT) {
      builder.maximumSize(maxWeight);
    }
  }
  if (ticker != null) {
    builder.ticker(ticker);
  }
  this.delegate=builder.build(loader);
}
